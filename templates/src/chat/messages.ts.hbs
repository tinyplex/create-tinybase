{{includeFile template="src/chat/messages.css.hbs" output="src/messages.css"}}
import './messages.css';
{{includeFile template="src/chat/message.ts.hbs" output="src/message.{{ext}}"}}
import {createMessage} from './message';

export const createMessages = (store: any): HTMLDivElement => {
const messagesContainer = document.createElement('div');
messagesContainer.id = 'messages';

const messageRows = store.getTable('messages');
const sortedIds = Object.keys(messageRows).sort(
(a, b) => messageRows[a].timestamp - messageRows[b].timestamp,
);

messagesContainer.innerHTML = '';
sortedIds.forEach((id) => {
const msg = messageRows[id];
const messageElement = createMessage(msg.username, msg.text, msg.timestamp);
messagesContainer.appendChild(messageElement);
});

return messagesContainer;
};