{{includeFile template="client/src/drawing/colorPicker.css.hbs" output="client/src/colorPicker.css"}}
{{addImport "import './colorPicker.css';"}}
{{addImport "import type {Store as SettingsStore} from './settingsStore';"}}

export const createColorPicker = (store: SettingsStore): HTMLDivElement => {
const colors = ['#d81b60', '#1976d2', '#388e3c', '#f57c00', '#7b1fa2', '#fff'];
const container = document.createElement('div');
container.id = 'colorPicker';

const buttons: HTMLButtonElement[] = [];

colors.forEach((color) => {
const btn = document.createElement('button');
btn.className = 'colorBtn';
btn.style.background = color;
btn.addEventListener('click', () => {
store.setValue('brushColor', color);
});
container.appendChild(btn);
buttons.push(btn);
});

const updateActive = () => {
const currentColor = store.getValue('brushColor');
buttons.forEach((btn, i) => {
btn.classList.toggle('active', colors[i] === currentColor);
});
};

store.addValueListener('brushColor', updateActive);
updateActive();

return container;
};