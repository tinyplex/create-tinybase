{{includeFile template="client/src/chat/usernameInput.css.hbs" output="client/src/usernameInput.css"}}
{{addImport "import './usernameInput.css';"}}
{{addImport "import {type SettingsStore} from './settingsStore';"}}
{{addImport "import {type ChatStore} from './chatStore';"}}

{{includeFile template="client/src/shared/input.ts.hbs" output="client/src/input.{{ext}}"}}
{{addImport "import {createInput} from './input';"}}

export const createUsernameInput = (settingsStore: SettingsStore, chatStore: ChatStore): HTMLDivElement => {
const container = document.createElement('div');
container.id = 'usernameInput';

const label = document.createElement('label');
label.textContent = 'Your name:';

const usernameInput = createInput('Enter your name', settingsStore.getValue('username') as string);

container.appendChild(label);
container.appendChild(usernameInput);

usernameInput.addEventListener('input', () => {
settingsStore.setValue('username', usernameInput.value);
});

settingsStore.addValuesListener(() => {
usernameInput.value = settingsStore.getValue('username') as string;
});

return container;
};
