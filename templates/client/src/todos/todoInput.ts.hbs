{{includeFile template="client/src/todos/todoInput.css.hbs" output="client/src/todoInput.css"}}
{{addImport "import './todoInput.css';"}}
{{addImport "import {type TodosStore} from './store';"}}
{{includeFile template="client/src/shared/button.ts.hbs" output="client/src/button.{{ext}}"}}
{{addImport "import {createButton} from './button';"}}
{{includeFile template="client/src/shared/input.ts.hbs" output="client/src/input.{{ext}}"}}
{{addImport "import {createInput} from './input';"}}

export const createTodoInput = (store: TodosStore): HTMLDivElement => {
const container = document.createElement('div');
container.id = 'todoInput';

const input = createInput('What needs to be done?');

const addTodo = () => {
const text = input.value.trim();
if (text) {
store.addRow('todos', {text, completed: false});
input.value = '';
}
};

input.addEventListener('keypress', (e) => {
if (e.key === 'Enter') {
addTodo();
}
});

const addButton = createButton('Add', addTodo, 'primary');

container.appendChild(input);
container.appendChild(addButton);

return container;
};