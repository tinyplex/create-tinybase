{{includeFile template="client/src/game/board.css.hbs" output="client/src/board.css"}}
import './board.css';
import {useMemo} from 'react';
import {useValue, STORE_ID} from './Store';
{{includeFile template="client/src/game/Square.tsx.hbs" output="client/src/Square.{{ext}}"}}
import {Square} from './Square';

export const Board = () => {
const gameStatus = useValue('gameStatus', STORE_ID);
const winningLine = useValue('winningLine', STORE_ID);

const winningPositions = useMemo(() => {
if (!winningLine) return new Set();
return new Set(winningLine.split(',').map(Number));
}, [winningLine]);

const disabled = gameStatus !== 'playing';

return (
<div id="board">
  {Array.from({length: 9}, (_, i) => (
  <Square key={i} position={i} disabled={disabled} winning={winningPositions.has(i)} />
  ))}
</div>
);
};